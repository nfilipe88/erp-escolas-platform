<div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-xl border-t-8 border-indigo-900">

  <div class="flex justify-between items-end mb-8 border-b pb-4">
    <div>
      <h1 class="text-3xl font-black text-gray-800">ðŸ“… DiÃ¡rio de Aulas</h1>
      <p class="text-gray-500">Registo de Assiduidade â€¢ Turma #{{ turmaId }}</p>
    </div>

    <div>
      <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Data da Chamada</label>
      <input type="date" [(ngModel)]="dataSelecionada" (change)="carregarDados()"
             class="p-2 border-2 border-indigo-100 rounded-lg font-bold text-indigo-900 cursor-pointer">
    </div>
  </div>

  <div *ngIf="loading" class="text-center py-10 text-gray-400">
    A carregar alunos...
  </div>

  <div *ngIf="!loading">
    <div class="grid grid-cols-1 gap-3">
      @for (aluno of alunos; track aluno.id) {
        <div class="flex items-center justify-between p-4 rounded-lg border transition cursor-pointer select-none"
             [ngClass]="{
               'bg-white border-gray-200 hover:border-gray-300': aluno.status === 'P',
               'bg-red-50 border-red-200': aluno.status === 'F',
               'bg-yellow-50 border-yellow-200': aluno.status === 'FJ'
             }"
             (click)="mudarStatus(aluno)">

          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-white"
                 [ngClass]="{
                   'bg-green-500': aluno.status === 'P',
                   'bg-red-500': aluno.status === 'F',
                   'bg-yellow-500': aluno.status === 'FJ'
                 }">
              {{ aluno.status }}
            </div>
            <div>
              <p class="font-bold text-gray-800 text-lg">{{ aluno.nome }}</p>
              <p class="text-xs text-gray-500 font-mono">{{ aluno.bi || 'Sem BI' }}</p>
            </div>
          </div>

          <div class="text-sm font-bold uppercase tracking-wider"
               [ngClass]="{
                 'text-green-700': aluno.status === 'P',
                 'text-red-700': aluno.status === 'F',
                 'text-yellow-700': aluno.status === 'FJ'
               }">
            <span *ngIf="aluno.status === 'P'">Presente</span>
            <span *ngIf="aluno.status === 'F'">Falta</span>
            <span *ngIf="aluno.status === 'FJ'">Justificada</span>
          </div>
        </div>
      } @empty {
        <p class="text-center text-gray-400 py-8">Nenhum aluno nesta turma.</p>
      }
    </div>

    <div class="mt-8 flex justify-end">
      <button (click)="salvarChamada()"
        class="bg-indigo-900 hover:bg-indigo-800 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition transform hover:-translate-y-1">
        ðŸ’¾ Salvar DiÃ¡rio
      </button>
    </div>
  </div>
</div>
