<div class="max-w-3xl mx-auto mt-10 p-8 bg-white shadow-xl rounded-xl border-t-8 border-green-700">

  <div class="mb-8 border-b pb-4">
    <h1 class="text-3xl font-black text-gray-800">
      {{ isEditMode ? 'âœï¸ Editar Aluno' : 'ğŸ“ Nova MatrÃ­cula' }}
    </h1>
    <p class="text-gray-500">Preencha os dados do estudante.</p>
  </div>

  <div *ngIf="mensagemSucesso" class="mb-4 p-4 bg-green-100 text-green-700 rounded border border-green-300 font-bold">
    âœ… {{ mensagemSucesso }}
  </div>
  <div *ngIf="mensagemErro" class="mb-4 p-4 bg-red-100 text-red-700 rounded border border-red-300 font-bold">
    âŒ {{ mensagemErro }}
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="md:col-span-2">
        <label class="block text-sm font-bold text-gray-700 mb-1">Nome Completo</label>
        <input formControlName="nome" type="text"
          class="w-full p-3 border rounded focus:ring-2 focus:ring-green-500 font-bold text-gray-800 uppercase">
      </div>

      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">NÂº Bilhete (BI)</label>
        <input formControlName="bi" type="text"
          class="w-full p-3 border rounded focus:ring-2 focus:ring-green-500 uppercase">
      </div>

      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">Data de Nascimento</label>
        <input formControlName="data_nascimento" type="date"
          class="w-full p-3 border rounded focus:ring-2 focus:ring-green-500">
      </div>
    </div>

    <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8">
      <h3 class="text-sm font-bold text-gray-500 uppercase mb-4 border-b pb-2">EnturmaÃ§Ã£o</h3>

      <div *ngIf="isSuperAdmin" class="mb-4">
        <label class="block text-sm font-bold text-yellow-700 mb-1">ğŸ« Selecionar Escola (Superadmin)</label>
        <select formControlName="escola_id" (change)="onEscolaChange()"
          class="w-full p-3 border-2 border-yellow-300 rounded bg-yellow-50 focus:border-yellow-500 text-gray-800 font-bold">
          <option [ngValue]="null">-- Escolha a Escola --</option>
          @for (escola of escolas; track escola.id) {
          <option [value]="escola.id">{{ escola.nome }}</option>
          }
        </select>
      </div>

      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">Selecionar Turma</label>
        <select formControlName="turma_id"
          class="w-full p-3 border rounded focus:ring-2 focus:ring-green-500 text-gray-800"
          [disabled]="isSuperAdmin && !form.get('escola_id')?.value">
          <option [ngValue]="null">-- Selecione a Turma --</option>
          @if (isSuperAdmin && !form.get('escola_id')?.value) {
          <option disabled>Primeiro selecione uma escola acima â¬†ï¸</option>
          }
          @for (t of turmas; track t.id) {
          <option [value]="t.id">{{ t.nome }} ({{ t.ano_letivo }}) - {{ t.turno }}</option>
          }
        </select>
      </div>
    </div>

    <button type="submit" [disabled]="form.invalid"
      class="w-full bg-green-700 hover:bg-green-800 text-white font-bold py-4 px-6 rounded-lg shadow-lg hover:shadow-xl transition transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed">
      {{ isEditMode ? 'ğŸ’¾ Guardar AlteraÃ§Ãµes' : 'ğŸ“ Confirmar MatrÃ­cula' }}
    </button>

  </form>
</div>
